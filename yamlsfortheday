apiVersion: v1
kind: Pod
metadata:
  name: secret-envars-test-pod
  namespace: <<namespace>>
spec:
  containers:
  - name: envars-test-container
    image: nginx
    env:
    - name: SECRET_USERNAME
      valueFrom:
        secretKeyRef:
          name: <<nameofsecret>>
          key: username
    - name: SECRET_PASSWORD
      valueFrom:
        secretKeyRef:
          name: <<nameofsecret>>
          key: password

apiVersion: v1
kind: Pod
metadata:
  name: mypod
  namespace: <<namespacename>>
spec:
  containers:
  - name: mypod
    image: nginx
    volumeMounts:
    - name: config
      mountPath: "/etc/vols"
      readOnly: true
  volumes:
  - name: config
    secret:
      secretName: <<nameofsecret>>
